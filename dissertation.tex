\documentclass[12pt, oneside, a4paper, final]{memoir}

\setlrmarginsandblock{2cm}{2cm}{*}
\setulmarginsandblock{2cm}{2cm}{*}
\checkandfixthelayout
\input{dissertation-info}
\input{preamble}
\usepackage{etoolbox}
\input{pageformat}

\usepackage{letltxmacro}

\LetLtxMacro\Oldfootnote\footnote

\newcommand{\EnableFootNotes}{%
  \LetLtxMacro\footnote\Oldfootnote%
}

\newcommand{\DisableFootNotes}{%
  \renewcommand{\footnote}[2][]{\relax}
}


\makepagestyle{myruled}
\makeheadrule{myruled}{\textwidth}{\normalrulethickness}
\makeevenhead{myruled}{\scshape\thesection}{\thepage}{}
\makeoddhead{myruled}{}{\thepage}{\thesection}

\begin{document}
%TC:ignore

\frontmatter
\include{Cover Page/coverpage}
\pdfbookmark[1]{Declaration}{Declaration of Originality}
\input{Declaration/declaration}
\pdfbookmark[1]{Proforma}{Proforma}
\input{Proforma/proforma}
\input{Acknowledgements/acknowledgements}

\chapterstyle{dash}

\setlength{\beforechapskip}{-35pt}\setlength{\afterchapskip}{15pt}

\titlespacing*{\section}{0pt}{1.5ex plus .2ex minus .1ex}{1.5ex}
\titlespacing*{\subsection}{0pt}{1.5ex plus .2ex minus .1ex}{1.5ex}
\titlespacing*{\subsubsection}{0pt}{1.5ex plus .2ex minus .1ex}{1.5ex}
\titlespacing*{\paragraph}{0pt}{1ex}{1em}

% Section
\titleformat{\section}
  {\normalfont\large\centering}
  {—~{\thesection}~—}
  {1em}
  {#1}

% Subsection
\titleformat{\subsection}
  {\normalfont\large\centering}
  {—~\thesubsection~—}
  {1em}
  {#1}

% Subsubsection (unnumbered, dashes around title, italic)
\titleformat{\subsubsection}
  {\normalfont\normalsize\itshape\centering}
  {}
  {0pt}
  {—~#1~—}

% Paragraph: italic, ends with dash
\titleformat{\paragraph}[runin]
  {\normalfont\itshape}
  {}
  {0pt}
  {—~#1}
  [~—]

\pagestyle{ruled}
\setlrmarginsandblock{2cm}{2cm}{*}
\setulmarginsandblock{2cm}{2cm}{*}
\setheaderspaces{*}{4pt}{*}
\checkandfixthelayout[fixed]

\newpage
\setcounter{tocdepth}{2}
\pdfbookmark[1]{Contents}{Contents}
\tableofcontents*

%\DisableFootNotes
%TC:endignore

\mainmatter

\include{Introduction/introduction}
\include{Preparation/preparation}
\include{Implementation/implementation}
%\include{Implementation/implementation plan}
\include{Evaluation/evaluation}
\include{Conclusions/conclusions}


%TC:ignore
\setcounter{biburllcpenalty}{7000}
\setcounter{biburlucpenalty}{8000}
\DeclareFieldFormat{doi}{%
  \hfil\penalty90\hfilneg\space DOI\addcolon\addnbspace
  \ifhyperref
    {\href{https://doi.org/#1}{\nolinkurl{#1}}}
    {\nolinkurl{#1}}}
\printbibliography

\appendix
\include{Appendices/typejudgements}
\include{Appendices/formalsemantics}
\include{Appendices/nondeterminismalternatives}
\include{Appendices/slicing}
\include{Appendices/unboxingbugs}
\include{Appendices/extendedmatching}
\include{Appendices/merges}
\include{Appendices/results}
\include{Appendices/usability}

\backmatter
\include{Proposal/proposal}
%TC:endignore

\end{document}